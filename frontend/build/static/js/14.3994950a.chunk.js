"use strict";(self.webpackChunkcanvas_app=self.webpackChunkcanvas_app||[]).push([[14],{67014:(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});var s=t(65043),a=t(7353),o=t(61596),r=t(94496),i=t(15795),l=t(11906),c=t(53517),d=t(93533),u=t(52134),g=t(8925),p=t(70579);function h(e){let{onAuthed:n}=e;const[t,h]=(0,s.useState)(""),[v,f]=(0,s.useState)(""),[m,x]=(0,s.useState)(!1),[b,A]=(0,s.useState)(""),y=(0,u.Zp)();return(0,p.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",mt:8},children:(0,p.jsxs)(o.A,{sx:{p:3,width:420},children:[(0,p.jsx)(r.A,{variant:"h6",children:"Sign in"}),b&&(0,p.jsx)(r.A,{variant:"body2",color:"error",sx:{mt:1},children:b}),(0,p.jsxs)(a.A,{component:"form",onSubmit:async function(e){e.preventDefault(),x(!0),A(""),console.log("Login attempt:",{username:t,password:v.length>0?"***":"empty"});const s=(t||"").trim(),a=g.Pv.username(s);if(a)return A(a),void x(!1);const o=g.Pv.password(v);if(o)return A(o),void x(!1);try{console.log("Attempting API login..."),console.log("Making fetch request to:",`${d.t}/auth/login`),console.log("Request body:",{username:s,password:"***"});const e=await(0,c.iD)(s,v,null);console.log("API login successful:",e),n({token:e.token,user:e.user}),y("/dashboard")}catch(r){console.error("Login failed:",r);const e=(0,g.NR)(r);A(e)}finally{x(!1)}},sx:{mt:2,display:"grid",gap:2},children:[(0,p.jsx)(i.A,{label:"Username",value:t,onChange:e=>h(e.target.value),disabled:m,required:!0}),(0,p.jsx)(i.A,{label:"Password",type:"password",value:v,onChange:e=>f(e.target.value),disabled:m,required:!0}),(0,p.jsx)(l.A,{type:"submit",variant:"contained",disabled:m,children:m?"Signing in...":"Login"}),(0,p.jsxs)(r.A,{variant:"body2",children:["No account? ",(0,p.jsx)(u.N_,{to:"/register",children:"Create one"})]})]})]})})}}}]);
//# sourceMappingURL=14.3994950a.chunk.js.map