{"version":3,"file":"static/js/14.3994950a.chunk.js","mappings":"gQAOe,SAASA,EAAKC,GAAgB,IAAf,SAAEC,GAAUD,EACxC,MAAOE,EAAGC,IAAQC,EAAAA,EAAAA,UAAS,KACpBC,EAAGC,IAAQF,EAAAA,EAAAA,UAAS,KACpBG,EAASC,IAAcJ,EAAAA,EAAAA,WAAS,IAChCK,EAAOC,IAAYN,EAAAA,EAAAA,UAAS,IAC7BO,GAAMC,EAAAA,EAAAA,MA0CZ,OACEC,EAAAA,EAAAA,KAACC,EAAAA,EAAG,CAACC,GAAI,CAAEC,QAAS,OAAQC,eAAgB,SAAUC,GAAI,GAAIC,UAC5DC,EAAAA,EAAAA,MAACC,EAAAA,EAAK,CAACN,GAAI,CAAEV,EAAG,EAAGiB,MAAO,KAAMH,SAAA,EAC9BN,EAAAA,EAAAA,KAACU,EAAAA,EAAU,CAACC,QAAQ,KAAIL,SAAC,YACxBV,IACCI,EAAAA,EAAAA,KAACU,EAAAA,EAAU,CAACC,QAAQ,QAAQC,MAAM,QAAQV,GAAI,CAAEG,GAAI,GAAIC,SACrDV,KAGLW,EAAAA,EAAAA,MAACN,EAAAA,EAAG,CAACY,UAAU,OAAOC,SAjD5BC,eAA4BC,GAC1BA,EAAEC,iBACFtB,GAAW,GACXE,EAAS,IAETqB,QAAQC,IAAI,iBAAkB,CAAEC,SAAU/B,EAAGgC,SAAU7B,EAAE8B,OAAS,EAAI,MAAQ,UAG9E,MAAMC,GAAgBlC,GAAK,IAAImC,OACzBC,EAAgBC,EAAAA,GAAiBN,SAASG,GAChD,GAAIE,EAGF,OAFA5B,EAAS4B,QACT9B,GAAW,GAIb,MAAMgC,EAAgBD,EAAAA,GAAiBL,SAAS7B,GAChD,GAAImC,EAGF,OAFA9B,EAAS8B,QACThC,GAAW,GAIb,IACEuB,QAAQC,IAAI,2BACZD,QAAQC,IAAI,2BAA4B,GAAGS,EAAAA,gBAC3CV,QAAQC,IAAI,gBAAiB,CAAEC,SAAUG,EAAcF,SAAU,QAEjE,MAAMQ,QAAYC,EAAAA,EAAAA,IAAMP,EAAc/B,EAAG,MACzC0B,QAAQC,IAAI,wBAAyBU,GACrCzC,EAAS,CAAE2C,MAAOF,EAAIE,MAAOC,KAAMH,EAAIG,OACvClC,EAAI,aACN,CAAE,MAAOmC,GACPf,QAAQtB,MAAM,gBAAiBqC,GAC/B,MAAMC,GAAeC,EAAAA,EAAAA,IAAmBF,GACxCpC,EAASqC,EACX,CAAC,QACCvC,GAAW,EACb,CACF,EAUoDO,GAAI,CAAEG,GAAI,EAAGF,QAAS,OAAQiC,IAAK,GAAI9B,SAAA,EACnFN,EAAAA,EAAAA,KAACqC,EAAAA,EAAS,CACRC,MAAM,WACNC,MAAOlD,EACPmD,SAAUxB,GAAK1B,EAAK0B,EAAEyB,OAAOF,OAC7BG,SAAUhD,EACViD,UAAQ,KAEV3C,EAAAA,EAAAA,KAACqC,EAAAA,EAAS,CACRC,MAAM,WACNM,KAAK,WACLL,MAAO/C,EACPgD,SAAUxB,GAAKvB,EAAKuB,EAAEyB,OAAOF,OAC7BG,SAAUhD,EACViD,UAAQ,KAEV3C,EAAAA,EAAAA,KAAC6C,EAAAA,EAAM,CACLD,KAAK,SACLjC,QAAQ,YACR+B,SAAUhD,EAAQY,SAEjBZ,EAAU,gBAAkB,WAE/Ba,EAAAA,EAAAA,MAACG,EAAAA,EAAU,CAACC,QAAQ,QAAOL,SAAA,CAAC,gBAAYN,EAAAA,EAAAA,KAAC8C,EAAAA,GAAI,CAACC,GAAG,YAAWzC,SAAC,yBAKvE,C","sources":["pages/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Box, Paper, TextField, Button, Typography } from '@mui/material';\nimport { login } from '../api/auth';\nimport { API_BASE } from '../config/apiConfig';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { formatErrorMessage, clientValidation } from '../utils/errorHandling';\n\nexport default function Login({ onAuthed }) {\n  const [u, setU] = useState('');\n  const [p, setP] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const nav = useNavigate();\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    console.log('Login attempt:', { username: u, password: p.length > 0 ? '***' : 'empty' });\n\n    // Client-side validation to provide immediate feedback\n    const usernameTrim = (u || '').trim();\n    const usernameError = clientValidation.username(usernameTrim);\n    if (usernameError) {\n      setError(usernameError);\n      setLoading(false);\n      return;\n    }\n\n    const passwordError = clientValidation.password(p);\n    if (passwordError) {\n      setError(passwordError);\n      setLoading(false);\n      return;\n    }\n\n    try {\n      console.log('Attempting API login...');\n      console.log('Making fetch request to:', `${API_BASE}/auth/login`);\n      console.log('Request body:', { username: usernameTrim, password: '***' });\n\n      const res = await login(usernameTrim, p, null);\n      console.log('API login successful:', res);\n      onAuthed({ token: res.token, user: res.user });\n      nav('/dashboard');\n    } catch (err) {\n      console.error('Login failed:', err);\n      const errorMessage = formatErrorMessage(err);\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  }\n  return (\n    <Box sx={{ display: 'flex', justifyContent: 'center', mt: 8 }}>\n      <Paper sx={{ p: 3, width: 420 }}>\n        <Typography variant=\"h6\">Sign in</Typography>\n        {error && (\n          <Typography variant=\"body2\" color=\"error\" sx={{ mt: 1 }}>\n            {error}\n          </Typography>\n        )}\n        <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 2, display: 'grid', gap: 2 }}>\n          <TextField\n            label=\"Username\"\n            value={u}\n            onChange={e => setU(e.target.value)}\n            disabled={loading}\n            required\n          />\n          <TextField\n            label=\"Password\"\n            type=\"password\"\n            value={p}\n            onChange={e => setP(e.target.value)}\n            disabled={loading}\n            required\n          />\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            disabled={loading}\n          >\n            {loading ? 'Signing in...' : 'Login'}\n          </Button>\n          <Typography variant=\"body2\">No account? <Link to=\"/register\">Create one</Link></Typography>\n        </Box>\n      </Paper>\n    </Box>\n  );\n}\n"],"names":["Login","_ref","onAuthed","u","setU","useState","p","setP","loading","setLoading","error","setError","nav","useNavigate","_jsx","Box","sx","display","justifyContent","mt","children","_jsxs","Paper","width","Typography","variant","color","component","onSubmit","async","e","preventDefault","console","log","username","password","length","usernameTrim","trim","usernameError","clientValidation","passwordError","API_BASE","res","login","token","user","err","errorMessage","formatErrorMessage","gap","TextField","label","value","onChange","target","disabled","required","type","Button","Link","to"],"sourceRoot":""}